# open-1v1-coordinator-test-client
Welcome to the test client for open-1v1-coordinator project. In order to run this repo, make sure you properly configure virtualenv (https://virtualenv.pypa.io/en/latest/) in your environment. After configuring a virutalenv for this project, activate it and run the following command inside your local copy of this repo:

`pip install -r requirements.txt`

## Running it
First you have to run and follow the frontend project instructions: https://github.com/samuelchvez/open-1v1-game-coordinator-frontend/blob/main/README.md

After logging in, your browser will be redirected to a callback screen with two inputs, press the `See credentials` button and copy them in a json file like this:

```
{
    "token": "YOUR COPIED TOKEN",
    "userid": "YOUR COPIED USER ID",
    "api": "https://34ankw1i2d.execute-api.us-east-2.amazonaws.com/dev",
    "websocket": "wss://0uhr9sw5jk.execute-api.us-east-2.amazonaws.com/dev"
}
```

Please not the `"api"` and `"websocket"` keys on the previous json, those are the currently provisioned endpoints for this project, so you have to leave them as they are.

When you are set with this file, I recommend to put it inside your local copy of this repo, but it can live wherever you need.

Let's assume that you will paste it inside your local copy of this repo, that you are in a terminal in the same directory, and that the json file is called `config.json` (you can call it however you like). To run the project just run the following command:

`python open1v1coordinator.py --config=./config.json`

This project comes with a verbose option, used by activating an environment variable like this:

`OPEN_1V1_STAGE=DEBUG python open1v1coordinator.py --config=./config.json`

This will allow you to check each request made to the backend serverless app.

## Using it
This will run in your terminal as an old school terminal app. The menus are described below.

## Tournaments
The backend let's you run 1v1 board game tournaments, but this client only plays tic tac toe. A tournament can have one of the following statuses:

### CREATED
Status obtained just after created the tournament. A player can only `register` to `CREATED` tournaments.

### OPEN
Status obtained just after opening the tournament. A player can only `join` to `OPEN` tournaments.

### PLAYING
Status obtained just after `starting` the tournament.

### COMPLETED
Status obtained after all tournament's matches are completed.

### Home Menu (not registered)

#### 1. Register user
This is the first option you have to use, in order to create the user in the tournament coordinator. Provide a nickname with at least 2 characters. After registering the user, you will be redirected to the registered menu.

#### 2. Exit
Use this option whenever you want to exit the application.

### Home Menu (registered)

#### 1. Register to tournament
Let's you register to a `CREATED` tournament. It will return a tournament `passkey`, which is a unique string generated by the backend that will uniquely identify your registration to a tournament, and will serve as an authentication mechanism to the web socket api.

#### 2. Open tournament
Opens a tournament, it displays a list of `CREATED` tournamets that have been created by the current user.

#### 3. Join tournament
Allows your user to join to the socket api managing an specific tournament. It asks for a `passkey`. When you join a tournament, you are redirected to the tournament menu.

#### 4. Start tournament
Sets a tournament as `PLAYING` and creates all the tournament's matches with online (joined) players.

#### 5. Create tournament
Allows you to create tournaments.

#### 6. Exit
Use this option whenever you want to exit the application.

### Tournament menu (joined)
This flow is dependant on the other actions being executed in the application. For example:
- When you just enter, you will be waiting until the tournament is started (`PLAYING`).
- When the server requires a move for your turn, you will see a rendered board and an input to chose the move you want to make.
- When the server tells you that your match is completed, you will see if you won, you lost or if it was a draw.
- When the server telss you that the tournament is completed, you will see the scoreboard.

